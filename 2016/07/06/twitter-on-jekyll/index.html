<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-79896728-2', 'auto');
  ga('send', 'pageview');

</script>

  <title>å¦‚ä½•åœ¨ jekyll ä¸­åµŒå…¥ twitter &middot; Puxuan</title>

  <!-- CSS -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab:700|PT+Serif:400,400italic,700,700italic" type="text/css">
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <!-- <link rel="stylesheet" href="/public/css/jekyll-github.css"> -->
  <link rel="stylesheet" href="/public/css/styles/atelier-forest-light.css">
  <script src="/public/css/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

  <!-- Insert to your webpage before the </head> -->
  <script src="/public/audioplayerengine/jquery.js"></script>
  <script src="/public/audioplayerengine/amazingaudioplayer.js"></script>
  <link rel="stylesheet" type="text/css" href="/public/audioplayerengine/initaudioplayer-1.css">
  <script src="/public/audioplayerengine/initaudioplayer-1.js"></script>
  <!-- End of head section HTML codes -->

  <link rel="canonical" href="http://puxuan.coding.me//2016/07/06/twitter-on-jekyll/" />

  

  

  

  <style>
    .content a,
    .related-posts li a:hover {
      color: #949667;
    }
    ::selection {
      color: #fff;
      background: #949667;
    }
    ::-moz-selection {
      color: #fff;
      background: #949667;
    }
  </style>

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/atom+xml" title="Puxuan" href="http://puxuan.coding.me//atom.xml">

</head>


  <body>
    <a id="_menu" class="menu" href="#_sidebar">â˜°</a>

    <main class="content container">
      


<article class="post">
  <h1 class="post-title">å¦‚ä½•åœ¨ jekyll ä¸­åµŒå…¥ twitter</h1>
  <div class="post-date">
    <time datetime="2016-07-06T00:00:00+08:00">07/06/16</time>
    <span>on <a href="/tag/code/">Technique</a></span>
  </div>
  
  <hr/>
  <p>æ€æ ·åœ¨è‡ªå·±çš„åšå®¢ä¸­åµŒå…¥ twitter æ¶ˆæ¯å‘¢ï¼Ÿ</p>

<p>è°·æ­Œç™¾åº¦äº†å¾ˆå¤šç›¸å…³èµ„æ–™ï¼Œæ²¡å‘ç°ç›¸å…³çš„ä¸­æ–‡èµ„æ–™ï¼Œå¤§æ¦‚æ˜¯å¤§å®¶éƒ½æ²¡è¿™æ ·çš„éœ€æ±‚å§ã€‚è‹±æ–‡èµ„æ–™å€’æ˜¯å¾ˆå¤šï¼Œä½†æ˜¯åˆæ­¥è¯•éªŒéƒ½ä¸å¥æ•ˆã€‚æœ€ç»ˆæ‰¾äº†ä¸€ä¸ª ruby æ’ä»¶ï¼Œè·ŸåŸä½œè€…è®¨è®ºäº†å¾ˆä¹…ï¼Œè§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œé¡ºå¸¦ç†è§£äº†å¾ˆå¤šä¸œè¥¿ï¼Œåœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹ã€‚</p>

<h2 id="section">ç¬¬ä¸€æ­¥ï¼šä¸‹è½½æ’ä»¶</h2>
<hr />
<p>å¦‚æœæœ¬åœ° repo æ²¡æœ‰ _plugins æ–‡ä»¶å¤¹çš„è¯ï¼Œæ–°å»ºä¸€ä¸ª</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>mkdir _plugins
</code></pre>
</div>

<p>ç„¶ååœ¨ _plugins ä¸‹</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>wget https://raw.githubusercontent.com/takuti/jekyll-lazy-tweet-embedding/master/lazy_tweet_embedding.rb
</code></pre>
</div>
<p>è¿™æ ·ä¸€æ¥è¿™ä¸ªæ’ä»¶å°±ç®—æ˜¯å®‰è£…å¥½äº†ï¼Œä¸è¿‡è¿˜ä¸èƒ½ä½¿ç”¨ã€‚</p>

<h2 id="section-1">ç¬¬äºŒæ­¥ï¼šè°ƒæ•´ä»£ç†</h2>
<hr />
<p>æŒ‰ç…§ä½œè€…çš„æ„æ€ï¼Œç›´æ¥åœ¨æ–‡ç« ä¸­æ’å…¥æ¨ç‰¹çš„ urlï¼Œç„¶åè¿™ä¸ª ruby æ’ä»¶å°±å¯ä»¥å€Ÿç”¨æ¨ç‰¹å®˜æ–¹æä¾›çš„ API è‡ªåŠ¨æŠŠå®ƒè½¬æ¢æˆç›¸åº”çš„å¯ä»¥åœ¨ç½‘é¡µä¸­æ˜¾ç¤ºçš„æ¨ç‰¹ä¿¡æ¯ã€‚</p>

<p>ç„¶è€Œå½“ä½ å°è¯•</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>jekyll build
</code></pre>
</div>

<p>æˆ–è€… jekyll serve ç­‰ç­‰ æ¥åˆ›å»ºæœ¬åœ°ç«™ç‚¹çš„æ—¶å€™ï¼Œjekyll ä¼šæŠ¥é”™æç¤ºä½  <strong>connect timeout(2)</strong>ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘æœå¨æ­¦é›„å£®çš„ä¸‡é‡Œé•¿åŸç»™ä½ æŠŠ twitter æŒ¡ä½äº†ï¼Œæ‰€ä»¥åœ¨ lazy_tweet_embedding.rb æ–‡ä»¶ä¸­</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code> <span class="c1"># convert tweet url to embedding html</span>
  <span class="k">class</span> <span class="nc">LazyTweetEmbedding</span>
    <span class="k">def</span> <span class="nf">get_html</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s2">"https://api.twitter.com/1/statuses/oembed.json?id=</span><span class="si">#{</span><span class="nb">id</span><span class="si">}</span><span class="s2">"</span>
        <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">url</span><span class="p">).</span><span class="nf">read</span><span class="p">,</span> <span class="p">{</span> <span class="ss">:symbolize_names</span> <span class="o">=&gt;</span> <span class="kp">true</span> <span class="p">})[</span><span class="ss">:html</span><span class="p">]</span>
    <span class="k">end</span>

    <span class="k">def</span> <span class="nf">convert</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
      <span class="n">r</span> <span class="o">=</span> <span class="sr">/^https?:\/\/twitter\.com\/[a-zA-Z0-9_]+\/status\/([0-9]+)\/?$/</span>
      <span class="n">r</span> <span class="o">=~</span> <span class="n">line</span> <span class="p">?</span> <span class="n">get_html</span><span class="p">(</span><span class="vg">$~</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="p">:</span> <span class="n">line</span>
    <span class="k">end</span>

    <span class="k">def</span> <span class="nf">embed</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
      <span class="n">content</span><span class="p">.</span><span class="nf">lines</span><span class="p">.</span><span class="nf">collect</span> <span class="p">{</span><span class="o">|</span><span class="n">line</span><span class="o">|</span> <span class="n">convert</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="p">}.</span><span class="nf">join</span>
    <span class="k">end</span>
  <span class="k">end</span>

</code></pre>
</div>

<p>open(url).read è¿™å—æ²¡æ³•è¿›è¡Œã€‚</p>

<p>å¥½åœ¨ open-url è¿™ä¸ªå‡½æ•°æä¾›äº† proxy å‚æ•°å¯ä»¥è®©æˆ‘ä»¬ä½¿ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå‡½æ•°æ”¹æˆ</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="ss">:proxy</span> <span class="o">=&gt;</span> <span class="s2">"http://127.0.0.1:1080"</span><span class="p">).</span><span class="nf">read</span><span class="p">,</span> <span class="p">{</span> <span class="ss">:symbolize_names</span> <span class="o">=&gt;</span> <span class="kp">true</span> <span class="p">})[</span><span class="ss">:html</span><span class="p">]</span>
</code></pre>
</div>

<p><strong>127.0.0.1:1080</strong>æ˜¯ shadowsocks çš„é»˜è®¤ç«¯å£ã€‚</p>

<p>ä½†æ˜¯è¿™æ ·æ”¹åŠ¨ä¹‹åä¾ç„¶æŠ¥é”™ï¼Œconnect timeout å˜æˆäº† read timeoutã€‚</p>

<h2 id="polipo--shadowsocks-">ç¬¬ä¸‰æ­¥ï¼špolipo å¯¹ shadowsocks è¿›è¡Œè½¬æ¢</h2>
<hr />
<p><strong>127.0.0.1:1080</strong> ä¸€ç›´æ˜¯æˆ‘ç”¨ shadowsocks æ—¶å¡«çš„åœ°å€ï¼Œä¸çŸ¥é“å“ªé‡Œæœ‰é—®é¢˜ã€‚åˆ°å¤„æŸ¥èµ„æ–™æ€æ²¡æŸ¥å‡ºä¸ªæ‰€ä»¥ç„¶æ¥ã€‚ä½†æ˜¯çœ‹åˆ°åˆ«äººå¼•ç”¨shadowsocks çš„æ—¶å€™éƒ½æ˜¯å†™çš„ï¼š<strong>socks5://127.0.0.1:1080</strong>ï¼Œæˆ‘è¿™é‡Œå‡½æ•°åªèƒ½å†™ http å› ä¸ºå…¶ä»–çš„å¼€å¤´æ— æ³•è¯†åˆ«ï¼Œæˆ‘æ‰å¼€å§‹æ„è¯†åˆ°ï¼Œsocks5å’Œ http æ˜¯ä¸¤ç§ä»£ç†ã€‚</p>

<p>ç”±äºæˆ‘è¿™è¾¹åªæœ‰ shadowsocksï¼Œæ‰€ä»¥æˆ‘åªèƒ½æƒ³åŠæ³•æŠŠ socks è½¬æˆ httpï¼Œæˆ‘é€‰æ‹©é‡‡ç”¨ polipoã€‚</p>

<p>å…·ä½“æ“ä½œå¯ä»¥ <a href="http://io.diveinedu.com/2016/03/16/%E7%94%A8Polipo%E6%8A%8AShadowSocks%E8%BD%AC%E4%B8%BAHTTP%E4%BB%A3%E7%90%86.html"><code class="highlighter-rouge">æˆ³æˆ‘</code></a>ï¼Œè¿™é‡Œè®²å¾—éå¸¸æ¸…æ¥šã€‚</p>

<p>å¼€å¯ polipo çš„æ—¶å€™</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>polipo <span class="nv">socksParentProxy</span><span class="o">=</span>localhost:1080
Established listening socket on port 8123.
</code></pre>
</div>
<p>æŠŠåŸæ¥çš„ä»£ç†å¯¼åˆ°äº† 8123ç«¯å£ï¼Œæ‰€ä»¥åŸæ¥çš„å‡½æ•°å†æ”¹ä¸€ä¸‹</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="ss">:proxy</span> <span class="o">=&gt;</span> <span class="s2">"http://127.0.0.1:8123"</span><span class="p">).</span><span class="nf">read</span><span class="p">,</span> <span class="p">{</span> <span class="ss">:symbolize_names</span> <span class="o">=&gt;</span> <span class="kp">true</span> <span class="p">})[</span><span class="ss">:html</span><span class="p">]</span>
</code></pre>
</div>

<p>æ¯æ¬¡åœ¨ jekyll build ä¹‹å‰å…ˆæŠŠ polipo æ‰“å¼€ã€‚è¯•éªŒä¸€ä¸‹ï¼Œåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥åœ¨æœ¬åœ°å®Œæˆå·¥ä½œäº†ã€‚</p>

<h2 id="jekyll">ç¬¬å››æ­¥ï¼šçœŸæ­£åœ°é™æ€éƒ¨ç½² jekyll</h2>
<hr />
<p>æˆ‘ä¸€å¼€å§‹æ²¡æœ‰ç†è§£è¿™ä¸ªâ€œé™æ€â€çš„å«ä¹‰ã€‚github pages + jekyll ä¸€ç›´è¯´è‡ªå·±æ˜¯é™æ€çš„ï¼Œç„¶åæˆ‘åˆæ˜¯å®Œå…¨æŒ‰ç…§ä»–ä»¬çš„æ­¥éª¤æ¥çš„ï¼Œæ‰€ä»¥æˆ‘ä»¥ä¸ºæˆ‘çš„ç«™ç‚¹æ˜¯é™æ€çš„äº†ã€‚</p>

<p>äº‹å®ä¸Šï¼Œgithub pages + jekyll æ˜¯åŠ¨æ€æ ¹æ®ä½ çš„æºæ–‡ä»¶ç”Ÿæˆçš„ç«™ç‚¹ï¼Œå®˜æ–¹ç”šè‡³ä¸éœ€è¦ä½ æŠŠ _site æ–‡ä»¶å¤¹æ¨ä¸Š repoã€‚è¿™æ ·ä¸€æ¥ï¼Œå¾ˆå¤šæ’ä»¶åœ¨ github pages ä¸Šå°±æ²¡æœ‰åŠæ³•æ­£å¸¸å·¥ä½œäº†ã€‚</p>

<p>æƒ³è¦å®Œå…¨åœ°ä½¿ç”¨ jekyll çš„æ’ä»¶ä¸å— github pages çš„é™åˆ¶ï¼Œä½†æ˜¯åˆæƒ³è¦å€Ÿç”¨ github pages çš„æœåŠ¡å™¨ï¼Ÿæ–¹æ³•å¾ˆç®€å•ï¼ŒåªæŠŠ _site çš„å†…å®¹æ¨ä¸Š repo å°±å¯ä»¥äº†ã€‚</p>

<p>æ³¨æ„ä¸æ˜¯ _site æ–‡ä»¶å¤¹ï¼Œæ˜¯é‡Œé¢çš„å…¨éƒ¨å†…å®¹ã€‚</p>

<h3 id="section-2">æµ‹è¯•ä¸€ä¸‹</h3>
<hr />

<blockquote class="twitter-tweet"><p lang="en" dir="ltr">Random thought: I&#39;ve always wanted to be on the cover of Slam Magazine! Got to check that off the list 1 day</p>&mdash; Isaiah Thomas (@Isaiah_Thomas) <a href="https://twitter.com/Isaiah_Thomas/status/749652458893303808">July 3, 2016</a></blockquote>
<script async="" src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

<hr />

<p>åœ¨æ­¤æ„Ÿè°¢æ’ä»¶çš„åŸä½œè€… <a href="http://takuti.me/"><code class="highlighter-rouge">@Takuya Kitazawa</code></a>ã€‚</p>


</article>


<aside class="author">
  <h2 class="aside-title">About</h2>

  
  <img class="me" src="/public/img/profile.jpg" alt="Puxuan Yu"/>
  

  <p>Software Engineering @ WuhanU ğŸ‡¨ğŸ‡³ , ISTJ.</p>

</aside>


<aside class="related">
  <h2 class="aside-title">Related Posts</h2>
  <ul class="related-posts">
    
    
    
      
      
        <li>
          <h4>
            <a href="/2016/12/07/image-segmention/">
              <span>Efficient Graph-based Image Segmentation</span>
              <small>12/07/16</small>
            </a>
          </h4>
        </li>
      
    
      
      
        <li>
          <h4>
            <a href="/2016/11/11/intro-to-xgboost/">
              <span>XGBoostè¯¦è§£</span>
              <small>11/11/16</small>
            </a>
          </h4>
        </li>
      
    
      
      
        <li>
          <h4>
            <a href="/2016/10/28/nnfml1/">
              <span>æœºå™¨å­¦ä¹ ä¸­çš„ç¥ç»ç½‘ç»œ-ç¬”è®°(1)</span>
              <small>10/28/16</small>
            </a>
          </h4>
        </li>
      
    
      
      
    
  </ul>
</aside>


<!-- å¤šè¯´è¯„è®ºæ¡† start -->
	<div class="ds-thread" data-thread-key='/2016/07/06/twitter-on-jekyll' data-title="å¦‚ä½•åœ¨ jekyll ä¸­åµŒå…¥ twitter" data-url='http://puxuan.coding.me//2016/07/06/twitter-on-jekyll/'></div>
<!-- å¤šè¯´è¯„è®ºæ¡† end -->
<!-- å¤šè¯´å…¬å…±JSä»£ç  start (ä¸€ä¸ªç½‘é¡µåªéœ€æ’å…¥ä¸€æ¬¡) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"lucius0814"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- å¤šè¯´å…¬å…±JSä»£ç  end -->


    </main>

    





<div   id="_backdrop" class="backdrop"></div>
<aside id="_sidebar" class="sidebar" style="background-image:url('/public/img/code.jpg')">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1><a href="/">Puxuan</a></h1>
      <p>10^14 synapses in a brain, and 10^9 seconds in a life.</p>

    </div>

    <nav class="sidebar-nav">
      <ul>
        
          
          <li>
            <a class="sidebar-nav-item " href="/tag/code/">Technique</a>
          </li>
        
          
          <li>
            <a class="sidebar-nav-item " href="/tag/travel/">Travel</a>
          </li>
        
          
          <li>
            <a class="sidebar-nav-item " href="/tag/music/">Music</a>
          </li>
        
          
          <li>
            <a class="sidebar-nav-item " href="/tag/other/">Misc</a>
          </li>
        

        

        
        
          
            
          
        
          
            
            <li>
              <a class="sidebar-nav-item " href="/about/">About</a>
            </li>
            
          
        
          
        
          
        
          
            
          
        
          
        
          
        
          
        
      </ul>
    </nav>

    <div class="sidebar-social">
      
        <a href="https://github.com/PxYu" target="_blank"><span class="icon-github"></span></a>

      

      
        <a href="https://instagram.com/pxyuwhu" target="_blank"><span class="icon-instagram"></span></a>

      

      
        <a href="https://twitter.com/pxyuwhu" target="_blank"><span class="icon-twitter-square"></span></a>

      

      
        <a href="https://facebook.com/martin.yu.5249" target="_blank"><span class="icon-facebook-square"></span></a>

      

      
        <a href="https://weibo.com/u/3290896193" target="_blank"><span class="icon-weibo"></span></a>

      


    </div>
  </div>
</aside>


    <script src="/public/js/hydejack.js" async></script>
  </body>
</html>
